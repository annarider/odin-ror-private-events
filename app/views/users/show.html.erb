<h1>All your events</h1>

<p>You're logged in as: 
  <%= @user.email %>
</p>

<h2>Events you created </h2>
<% if @user.created_events.any? %>
  <% @user.created_events.each do |event| %>
    <li>
      Location: <strong><%= event.location %></strong> - <%= event.date %>
    </li>
    <% end %>
  </ul>
<% else %> 
  <p>You haven't created any events yet.</p>
<% end %>

<%= button_to 'Create Event', new_event_path %>

<hr>

<% upcoming_events = @user.attended_events.upcoming %>
<% past_events = @user.attended_events.past %>

<h2>Events you are attending</h2>
  <% if upcoming_events.any? %>
    <ul>
      <% upcoming_events.each do |event| %>
        <li>
          Location: <strong><%= event.location %></strong> - <%= event.date %>
          <% if current_user == @user %>
            <% button_to 'Cancel Attendance', invitation_path(@user.invitations.find_by(event_id: event.id)), method: :delete %>
          <% end %>
        </li>
    <% end %>
    </ul>
<% else %>
  <p>You haven't joined any events yet.</p>
<% end %>

<h2>Events you have attended</h2>
<% if past_events.any? %>
  <ul>
    <% past_events.each do |event| %>
    <li>
      Location: <strong><%= event.location %></strong> - <%= event.date %>
    </li>
    <% end %>
  </ul>
<% else %>
  <p>You haven't attended any events yet.</p>
<% end %>
